---
name: "Setup python venv with uv"
description: "Common setup steps"
runs:
  using: "composite"
  steps:
    # checkout (has to be repeated in downstream workflow jobs)
    - name: Checkout
      uses: actions/checkout@v5
    # python
    - name: "Set up Python"
      uses: actions/setup-python@v6
      with:
        python-version-file: ".python-version"
    # uv
    - name: "Setup uv with caching enabled"
      # pin for compatibility with Github Local Actions extension
      uses: astral-sh/setup-uv@f94ec6bedd8674c4426838e6b50417d36b6ab231 #v5.3.1
      with:
        enable-cache: true
        version: "0.9.8"
    - name: Install the project
      shell: sh
      run: uv sync --locked --all-extras --dev
      env:
        UV_SYSTEM_PYTHON: 1
